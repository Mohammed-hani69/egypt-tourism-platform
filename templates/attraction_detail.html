<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ attraction.name }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <!-- Add Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root {
            --primary-red: #e74c3c;
            --secondary-red: #c0392b;
            --light-red: #ff6b6b;
            --white: #ffffff;
            --off-white: #fff5f5;
            --light-gray: #f8f9fa;
            --medium-gray: #e9ecef;
            --dark-gray: #343a40;
            --gold: #ffd700;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, var(--off-white) 0%, var(--white) 100%);
            color: #333;
            overflow-x: hidden;
        }
        
        /* Top Header */
        .top-header {
            background: linear-gradient(90deg, var(--primary-red), var(--secondary-red));
            padding: 8px 0;
            color: var(--white);
        }
        
        .top-header .contact-info {
            font-size: 0.9rem;
        }
        
        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: var(--white);
            margin: 0 5px;
            transition: all 0.3s;
        }
        
        .social-icons a:hover {
            background-color: var(--white);
            color: var(--secondary-red);
            transform: translateY(-3px);
        }
        
        /* Main Header */
        .main-header {
            padding: 15px 0;
            background: var(--white);
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--primary-red);
            font-size: 1.8rem;
        }
        
        .nav-link {
            color: #333;
            font-weight: 600;
            margin: 0 10px;
            position: relative;
            transition: color 0.3s;
        }
        
        .nav-link:hover {
            color: var(--primary-red);
        }
        
        .nav-link:hover::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: var(--primary-red);
            bottom: -5px;
            left: 0;
            transform: scaleX(1);
            transition: transform 0.3s;
        }
        
        .navbar-nav .btn {
            border-radius: 50px;
            padding: 8px 20px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-outline-primary {
            color: var(--primary-red);
            border-color: var(--primary-red);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-red);
            color: var(--white);
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
        }
        
        .btn-primary {
            background-color: var(--primary-red);
            border-color: var(--primary-red);
            box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-red);
            border-color: var(--secondary-red);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(231, 76, 60, 0.4);
        }

        /* Main Container */
        .main-container {
            padding: 40px 0;
            position: relative;
        }

        /* Attraction Header */
        .attraction-header {
            position: relative;
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            margin-bottom: 30px;
            border-top: 4px solid var(--primary-red);
        }
        
        .attraction-header h1 {
            font-weight: 700;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }
        
        .attraction-header .lead {
            font-size: 1.1rem;
            color: var(--primary-red);
            font-weight: 600;
        }
        
        /* Rating Display */
        .rating-display {
            position: relative;
            display: inline-block;
            font-size: 1.2rem;
            line-height: 1;
        }
        
        .rating {
            color: #ddd;
        }
        
        .rating-stars {
            position: absolute;
            top: 0;
            left: 0;
            overflow: hidden;
            color: var(--gold);
        }
        
        /* Ticket Card */
        .ticket-card {
            background: linear-gradient(135deg, var(--off-white), var(--white));
            border-radius: 15px;
            border-left: 4px solid var(--gold);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        
        .ticket-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .ticket-card .card-title {
            color: var(--primary-red);
            font-weight: 700;
        }
        
        /* Attraction Image and Description */
        .attraction-image {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .attraction-image img {
            width: 100%;
            border-radius: 15px;
            transition: transform 0.5s;
        }
        
        .attraction-image:hover img {
            transform: scale(1.05);
        }
        
        .attraction-description {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            height: 100%;
        }
        
        .attraction-description h3 {
            color: var(--primary-red);
            font-weight: 700;
            margin-bottom: 20px;
            position: relative;
        }
        
        .attraction-description h3::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 3px;
            background-color: var(--gold);
            bottom: -10px;
            left: 0;
        }
        
        /* Map Section */
        #map {
            height: 400px;
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            z-index: 1;
        }
        
        /* Section Headers */
        .section-header {
            margin-bottom: 30px;
            position: relative;
        }
        
        .section-header h3 {
            color: var(--primary-red);
            font-weight: 700;
            display: inline-block;
            position: relative;
            padding-bottom: 10px;
        }
        
        .section-header h3::after {
            content: '';
            position: absolute;
            width: 60px;
            height: 3px;
            background-color: var(--gold);
            bottom: 0;
            left: 0;
        }
        
        /* Card Styles */
        .card {
            border: none;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s;
            margin-bottom: 20px;
            background: var(--white);
        }
        
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .card-body {
            padding: 20px;
        }
        
        .card-title {
            font-weight: 700;
            color: var(--primary-red);
            margin-bottom: 15px;
        }
        
        .badge {
            padding: 5px 10px;
            margin-right: 5px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        /* Reviews */
        .review-card {
            border-left: 4px solid var(--primary-red);
            background: linear-gradient(135deg, var(--white), var(--off-white));
        }
        
        .review-card .card-title {
            font-size: 1.2rem;
        }
        
        .review-date {
            font-style: italic;
            color: #6c757d;
        }
        
        /* Footer */
        .main-footer {
            background: linear-gradient(135deg, var(--primary-red) 0%, var(--secondary-red) 100%);
            color: var(--white);
            padding-top: 3rem;
            position: relative;
            overflow: hidden;
        }
        
        .main-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.05),
                rgba(255, 255, 255, 0.05) 10px,
                rgba(255, 255, 255, 0) 10px,
                rgba(255, 255, 255, 0) 20px
            );
        }
        
        .footer-heading {
            font-weight: 700;
            margin-bottom: 25px;
            position: relative;
            display: inline-block;
        }
        
        .footer-heading::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 3px;
            background-color: var(--white);
            bottom: -10px;
            left: 0;
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a, .footer-links li {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            transition: all 0.3s;
            display: inline-block;
        }
        
        .footer-links a:hover {
            color: var(--white);
            transform: translateX(5px);
        }
        
        .footer-links i {
            margin-right: 10px;
            width: 16px;
        }
        
        .footer-bottom {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px 0;
            margin-top: 3rem;
            text-align: center;
            position: relative;
        }
        
        /* Media Queries */
        @media (max-width: 992px) {
            .attraction-description {
                margin-top: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .main-container {
                padding: 20px 0;
            }
            
            .attraction-header {
                padding: 20px;
            }
            
            .attraction-header h1 {
                font-size: 2rem;
            }
            
            .section-header h3 {
                font-size: 1.5rem;
            }
        }

        /* Animated Background Elements */
        .bg-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
        }
        
        .bg-shape {
            position: absolute;
            opacity: 0.05;
            animation: float 15s infinite;
        }
        
        .shape-1 {
            width: 100px;
            height: 100px;
            background: var(--primary-red);
            clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }
        
        .shape-2 {
            width: 80px;
            height: 80px;
            background: var(--secondary-red);
            border-radius: 50%;
            top: 60%;
            right: 10%;
            animation-delay: 2s;
        }
        
        .shape-3 {
            width: 120px;
            height: 120px;
            background: var(--gold);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            bottom: 10%;
            left: 15%;
            animation-delay: 4s;
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }
        
        /* Enhanced Map Container */
        .map-container {
            position: relative;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-red) 0%, var(--secondary-red) 100%);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .map-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(0,0,0,0) 70%);
            animation: rotate 15s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        #map {
            height: 450px;
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            z-index: 1;
            border: 4px solid var(--primary-red);
            transition: all 0.3s ease;
        }
        
        .map-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .map-container:hover #map {
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }
        
        /* Custom Map Controls */
        .map-controls {
            position: absolute;
            bottom: 30px;
            right: 30px;
            z-index: 2;
            display: flex;
            gap: 10px;
        }
        
        .map-control-btn {
            width: 40px;
            height: 40px;
            background: white;
            border: none;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .map-control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            background: var(--primary-red);
            color: white;
        }
        
        /* Custom Marker Styles */
        .restaurant-marker {
            background: white;
            border-radius: 50%;
            padding: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            color: var(--primary-red);
            transition: all 0.3s ease;
        }
        
        .restaurant-marker:hover {
            transform: scale(1.2);
        }

        .attraction-marker {
            background: var(--primary-red);
            border-radius: 50%;
            padding: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            color: white;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .attraction-marker i {
            color: white;
        }
    </style>
</head>
<body>
    <!-- Add Background Shapes -->
    <div class="bg-shapes">
        <div class="bg-shape shape-1"></div>
        <div class="bg-shape shape-2"></div>
        <div class="bg-shape shape-3"></div>
    </div>
    
    <!-- Top Header -->
    <div class="top-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="contact-info">
                        <span class="me-3"><i class="fas fa-phone me-2"></i>+20 123 456 789</span>
                        <span><i class="fas fa-envelope me-2"></i>info@discovergypt.com</span>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Header -->
    <header class="main-header">
        <div class="container">
            <nav class="navbar navbar-expand-lg">
                <a class="navbar-brand logo" href="{{ url_for('main.index') }}">
                    <i class="fas fa-pyramid"></i> {{ _('اكتشف مصر') }}
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('main.index') }}">{{ _('الرئيسية') }}</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('main.attractions') }}">{{ _('المعالم السياحية') }}</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('main.guides') }}">{{ _('المرشدين السياحيين') }}</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('main.language_practice') }}">{{ _('تعلم اللغات') }}</a>
                        </li>
                        {% if current_user.is_authenticated %}
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user-circle"></i> {{ _('حسابي') }}
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="{{ url_for('main.profile') }}"><i class="fas fa-user"></i> {{ _('الملف الشخصي') }}</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="{{ url_for('main.logout') }}"><i class="fas fa-sign-out-alt"></i> {{ _('تسجيل الخروج') }}</a></li>
                                </ul>
                            </li>
                        {% else %}
                            <li class="nav-item">
                                <a class="btn btn-outline-primary btn-sm ms-2" href="{{ url_for('main.login') }}">{{ _('تسجيل الدخول') }}</a>
                            </li>
                            <li class="nav-item">
                                <a class="btn btn-primary btn-sm ms-2" href="{{ url_for('main.register') }}">{{ _('التسجيل') }}</a>
                            </li>
                        {% endif %}
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-container">
        <div class="container">
            <!-- Attraction Header -->
            <div class="attraction-header">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <h1>{{ attraction.name }}</h1>
                        <p class="lead"><i class="fas fa-map-marker-alt me-2"></i>{{ attraction.region.name }}</p>
                        <div class="rating-display" data-rating="{{ avg_rating }}">
                            <div class="rating">★★★★★</div>
                            <div class="rating-stars" style="width: {{ (avg_rating / 5) * 100 }}%">★★★★★</div>
                            <span class="ms-2">({{ reviews|length }} {% if reviews|length == 1 %}review{% else %}reviews{% endif %})</span>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        {% if attraction.ticket_price %}
                            <div class="ticket-card card mb-3">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="fas fa-ticket-alt me-2"></i>Ticket Price</h5>
                                    <p class="card-text">{{ attraction.ticket_price }}</p>
                                    {% if attraction.opening_hours %}
                                        <p class="card-text"><i class="far fa-clock me-2"></i><strong>Opening Hours:</strong> {{ attraction.opening_hours }}</p>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Attraction Image and Description -->
            <div class="row mb-5">
                <div class="col-lg-6">
                    <div class="attraction-image">
                        <img src="{{ attraction.image_url or 'https://source.unsplash.com/800x600/?egypt,' + attraction.name }}" class="img-fluid" alt="{{ attraction.name }}">
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="attraction-description">
                        <h3>About</h3>
                        <p>{{ attraction.description }}</p>
                        
                        {% if attraction.address %}
                            <p><i class="fas fa-map-marked-alt me-2"></i><strong>Address:</strong> {{ attraction.address }}</p>
                        {% endif %}
                        
                        {% if attraction.website %}
                            <p><i class="fas fa-globe me-2"></i><strong>Website:</strong> <a href="{{ attraction.website }}" target="_blank" class="text-primary">{{ attraction.website }}</a></p>
                        {% endif %}
                        
                        <!-- Add Review Button -->
                        {% if current_user.is_authenticated %}
                            <a href="{{ url_for('main.add_review', attraction_id=attraction.id) }}" class="btn btn-primary mt-3">
                                <i class="fas fa-star me-2"></i> Write a Review
                            </a>
                        {% else %}
                            <a href="{{ url_for('login') }}" class="btn btn-outline-primary mt-3">
                                <i class="fas fa-sign-in-alt me-2"></i> Login to Write a Review
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Map Section -->
            <div class="row mb-5">
                <div class="col-12">
                    <div class="section-header">
                        <h3><i class="fas fa-map-marked-alt me-2"></i>Location</h3>
                    </div>
                    <div class="map-container">
                        <div id="map"></div>
                        <div class="map-controls">
                            <button class="map-control-btn" onclick="zoomIn()">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="map-control-btn" onclick="zoomOut()">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button class="map-control-btn" onclick="centerMap()">
                                <i class="fas fa-crosshairs"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Nearby Restaurants -->
            <div class="row mb-5">
                <div class="col-12">
                    <div class="section-header">
                        <h3><i class="fas fa-utensils me-2"></i>Nearby Restaurants</h3>
                    </div>
                    {% if restaurants %}
                        <div class="row">
                            {% for restaurant in restaurants %}
                                <div class="col-lg-4 col-md-6 mb-4">
                                    <div class="card h-100 restaurant-data" 
                                         data-lat="{{ restaurant.latitude }}" 
                                         data-lng="{{ restaurant.longitude }}" 
                                         data-name="{{ restaurant.name }}">
                                        <div class="card-body">
                                            <h5 class="card-title">{{ restaurant.name }}</h5>
                                            <p class="card-text">
                                                {% if restaurant.cuisine_type %}
                                                    <span class="badge bg-info">{{ restaurant.cuisine_type }}</span>
                                                {% endif %}
                                                {% if restaurant.price_range %}
                                                    <span class="badge bg-secondary">{{ restaurant.price_range }}</span>
                                                {% endif %}
                                            </p>
                                            <p class="card-text">{{ restaurant.description[:100] if restaurant.description else 'No description available.' }}{% if restaurant.description and restaurant.description|length > 100 %}...{% endif %}</p>
                                            {% if restaurant.contact %}
                                                <p class="card-text"><small class="text-muted"><i class="fas fa-phone me-1"></i> {{ restaurant.contact }}</small></p>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> No restaurant information available for this attraction.
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Activities -->
            <div class="row mb-5">
                <div class="col-12">
                    <div class="section-header">
                        <h3><i class="fas fa-hiking me-2"></i>Available Activities</h3>
                    </div>
                    {% if activities %}
                        <div class="row">
                            {% for activity in activities %}
                                <div class="col-lg-4 col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h5 class="card-title">{{ activity.name }}</h5>
                                            <p class="card-text">{{ activity.description[:100] if activity.description else 'No description available.' }}{% if activity.description and activity.description|length > 100 %}...{% endif %}</p>
                                            {% if activity.price %}
                                                <p class="card-text"><i class="fas fa-tag me-2"></i><strong>Price:</strong> {{ activity.price }}</p>
                                            {% endif %}
                                            {% if activity.duration %}
                                                <p class="card-text"><i class="far fa-clock me-2"></i><strong>Duration:</strong> {{ activity.duration }}</p>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> No activity information available for this attraction.
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Reviews -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="section-header">
                        <h3><i class="fas fa-comment-alt me-2"></i>Reviews</h3>
                    </div>
                    {% if reviews %}
                        {% for review in reviews %}
                            <div class="card review-card mb-3">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h5 class="card-title mb-0">{{ review.title }}</h5>
                                        <div class="rating-display" data-rating="{{ review.rating }}">
                                            <div class="rating">★★★★★</div>
                                            <div class="rating-stars" style="width: {{ (review.rating / 5) * 100 }}%">★★★★★</div>
                                        </div>
                                    </div>
                                    <p class="card-text">{{ review.content }}</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <small class="text-muted"><i class="fas fa-user me-1"></i> {{ review.author.username }}</small>
                                        <small class="review-date"><i class="far fa-calendar-alt me-1"></i> {{ review.date_posted.strftime('%B %d, %Y') }}</small>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> No reviews yet. Be the first to share your experience!
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h4 class="footer-heading">عن اكتشف مصر</h4>
                    <p>نحن نقدم لكم أفضل التجارب السياحية في مصر، مع خدمات متميزة وأسعار تنافسية.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h4 class="footer-heading">روابط سريعة</h4>
                    <ul class="footer-links">
                        <li><a href="/tours"><i class="fas fa-chevron-right"></i> الرحلات السياحية</a></li>
                        <li><a href="/hotels"><i class="fas fa-chevron-right"></i> الفنادق</a></li>
                        <li><a href="/transportation"><i class="fas fa-chevron-right"></i> المواصلات</a></li>
                        <li><a href="/blog"><i class="fas fa-chevron-right"></i> المدونة</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h4 class="footer-heading">تواصل معنا</h4>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt me-2"></i>القاهرة، مصر</li>
                        <li><i class="fas fa-phone me-2"></i>+20 123 456 789</li>
                        <li><i class="fas fa-envelope me-2"></i>info@discovergypt.com</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <p class="mb-0">© 2024 اكتشف مصر. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Add Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        let mapInstance;
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize OpenStreetMap centered on Egypt
            mapInstance = L.map('map').setView([26.8206, 30.8025], 6);  // Egypt's center coordinates
            
            // Add OpenStreetMap tiles with custom style
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors',
                className: 'map-tiles'
            }).addTo(mapInstance);
            
            // Add custom styled marker for the attraction
            const attractionIcon = L.divIcon({
                html: '<i class="fas fa-monument fa-2x"></i>',
                className: 'attraction-marker',
                iconSize: [40, 40]
            });
            
            // Add marker for the attraction with red color
            const attractionMarker = L.marker([{{ attraction.latitude }}, {{ attraction.longitude }}], {
                icon: attractionIcon
            }).addTo(mapInstance);

            // Add popup for the attraction
            attractionMarker.bindPopup(
                `<div style="color: var(--primary-red);">
                    <strong>{{ attraction.name }}</strong>
                </div>`
            );
            
            // Add a bounce animation to the marker
            attractionMarker.on('mouseover', function() {
                this._icon.style.transform += ' scale(1.2)';
            });
            
            attractionMarker.on('mouseout', function() {
                this._icon.style.transform = this._icon.style.transform.replace(' scale(1.2)', '');
            });

            // Zoom to attraction after a short delay
            setTimeout(() => {
                mapInstance.flyTo([{{ attraction.latitude }}, {{ attraction.longitude }}], 15, {
                    duration: 2
                });
            }, 1000);
                
            // Add restaurant markers with custom style
            {% if restaurants %}
                {% for restaurant in restaurants %}
                    L.marker([{{ restaurant.latitude }}, {{ restaurant.longitude }}], {
                        icon: L.divIcon({
                            html: '<i class="fas fa-utensils"></i>',
                            className: 'restaurant-marker',
                            iconSize: [30, 30]
                        })
                    }).addTo(mapInstance)
                    .bindPopup(`
                        <div style="color: var(--primary-red);">
                            <strong>{{ restaurant.name }}</strong>
                        </div>
                    `);
                {% endfor %}
            {% endif %}
        });
        
        // Map Control Functions
        function zoomIn() {
            mapInstance.setZoom(mapInstance.getZoom() + 1);
        }
        
        function zoomOut() {
            mapInstance.setZoom(mapInstance.getZoom() - 1);
        }
        
        function centerMap() {
            mapInstance.setView([{{ attraction.latitude }}, {{ attraction.longitude }}], 15);
        }
    </script>
</body>
</html>